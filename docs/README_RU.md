[English](https://github.com/victordomingos/Count-files/blob/master/README.md) | [Portugu&ecirc;s](https://github.com/victordomingos/Count-files/blob/master/docs/README_PT.md) | **[&#x420;&#x443;&#x441;&#x441;&#x43A;&#x438;&#x439; &#x44F;&#x437;&#x44B;&#x43A;](https://github.com/victordomingos/Count-files/blob/master/docs/README_RU.md)**
 
 
# Count Files [![Github commits (since latest release)](https://img.shields.io/github/commits-since/victordomingos/Count-files/latest.svg)](https://github.com/victordomingos/Count-files)

Утилита командной строки (CLI), с помощью которой можно подсчитывать все файлы
или искать файлы с определенным расширением (а также без него) в указанном каталоге.
По умолчанию программа будет рекурсивно считать файлы как в текущем рабочем каталоге,
так и во всех его подкаталогах и отобразит таблицу, показывающую частоту для каждого расширения файла
(например: .txt, .py, .html, .css) и их общее количество.

Поддерживаемые операционные системы: Linux, Mac OS, Windows. Также может использоваться
на iOS (iPhone/iPad) с использованием командной строки [StaSh](https://github.com/ywangd/stash) в приложении Pythonista 3.


![Count Files_screenshot - counting files by extension](https://user-images.githubusercontent.com/18650184/42160179-29998a52-7dee-11e8-9813-b8594e50fe77.png)


## Содержание  
- **[Установка и зависимости](#Установка-и-зависимости)**
   - [На настольные операционные системы](#На-настольные-операционные-системы)
   - [На iPhone или iPad (в Pythonista 3 для iOS)](#На-iphone-или-ipad-в-pythonista-3-для-ios)
  
- **[Как использовать CLI](#Как-использовать-cli)**  
   - [Аргументы CLI](#Аргументы-cli)
   - [Получение справки](#Получение-справки)
   - [Скрытые файлы и папки](#Скрытые-файлы-и-папки)
   - [Чувствительность к регистру](#Чувствительность-к-регистру)
   - [Настройка отображения результатов и обратной связи](#Настройка-отображения-результатов-и-обратной-связи)  
   - [Примеры использования](#Примеры-использования)  
      - [Подсчет общего количества файлов в директории](#Подсчет-общего-количества-файлов-в-директории)  
      - [Подсчет всех файлов и их расширений](#Подсчет-всех-файлов-и-их-расширений)  
      - [Поиск файлов с определенным расширением](#Поиск-файлов-с-определенным-расширением)
      - [Поиск файлов без расширения](#Поиск-файлов-без-расширения)
      - [Поиск всех файлов](#Поиск-всех-файлов)
      - [Дополнительные аргументы](#Дополнительные-аргументы)
  
- **[Вы нашли ошибку или у Вас есть предложения по улучшению?](#Вы-нашли-ошибку-или-у-Вас-есть-предложения-по-улучшению)**


## Установка и зависимости:

### На настольные операционные системы

Текущую версию можно установить с помощью [pip install -e](https://pip.pypa.io/en/stable/reference/pip_install/#usage)  
Также следует указать путь к основному каталогу проекта (тот, в котором находится файл ` setup.py`).

Для работы приложения требуется версия Python 3.6+.

Мы планируем представить проект на PyPI как можно скорее для обеспечения более простого процесса инсталяции и обновления. Пока этого не произошло Вы можете сделать свой вклад в развитие проекта.

### На iPhone или iPad (в Pythonista 3 для iOS)

Для начала Вам будет необходимо окружение и командная оболочка, совместимая с Python 3.
В настоящее время это означает, что Вам нужно иметь приложение [Pythonista 3](http://omz-software.com/pythonista/) (которое, помимо прочего, является очень приятной средой для разработки и/или запуска Python-приложений на iOS).

Затем необходимо установить
[StaSh](https://github.com/ywangd/stash), Bash-подобное приложение для Pythonista.
Это позволит использовать такие полезные команды, как `wget`, ` git clone`, `pip install` и др.
Оно действительно заслуживает ярлыка на главном экране Вашего iPhone или iPad.

После выполнения инструкций по установке StaSh Вам может потребоваться обновить его до последней версии. Попробуйте эту команду:

```
selfupdate.py -f bennr01:command_testing
```

Затем принудительно завершите работу и перезапустите Pythonista и снова запустите StaSh.
Теперь можно попробовать установить программу напрямую из git-хранилища:

```
pip install victordomingos/Count-files
```

Если все пойдет хорошо, внутри папки `~/Documents/site-packages-3/` появится новый пакет `count_files` и будет создан entrypoint script с именем `count-files.py` в `stash_extensions/bin`. Затем принудительно завершите работу и снова запустите StaSh.
Теперь можно запустить эту программу непосредственно из оболочки, чтобы подсчитать все файлы, которые могут быть внутри Pythonista.

## Как использовать CLI:

### Аргументы CLI

Аргументы можно указывать как в короткой так и в длинной форме. Например: `-a` или `--all`.

```
usage: count-files [-h] [-v] [-st] [-a]
                   [-c] [-nr] [-nf] [-t TOTAL]
                   [-alpha] [-fe FILE_EXTENSION] [-fs]
                   [-p] [-ps PREVIEW_SIZE] [path]
```

```
usage: count-files [--help] [--version] [--supported-types] [--all]
                   [--case-sensitive] [--no-recursion] [--no-feedback] [--total TOTAL]
                   [--sort-alpha] [--file-extension FILE_EXTENSION] [--file-sizes]
                   [--preview] [--preview-size PREVIEW_SIZE] [path]
```

Наиболее простой формой является ввод команды без всяких аргументов. Итак, подсчитаем все файлы в текущем рабочем каталоге и во всех его подкаталогах, игнорируя скрытые файлы и папки:

`count-files`

По умолчанию файлы будут подсчитаны рекурсивно. Результатом будет таблица, показывающая частоту для каждого расширения файла (например: .txt, .py, .html, .css) и общее количество найденных файлов.

Также с помощью CLI можно искать файлы с определенным расширением. Результат поиска можно получить в виде списка с полными путями к файлам или общего числа найденных файлов.

```
count-files -fe txt
```

```
count-files --file-extension txt
```

Вы можете указать полный путь к нужной папке. Если позиционный аргумент `path` не указан, то будет проверена текущая рабочая директория.  
Для обработки файлов в домашнем каталоге пользователя можно использовать ```~```

Если в названиях папок присутствуют пробелы, то `path` следует указать в кавычках. Пример для Windows:

```
count-files "~\Desktop\Новая папка"
```

По умолчанию используется рекурсивный способ подсчета или поиска файлов. Укажите аргумент `-nr` или ` --no-recursion` если нет необходимости в информации о файлах из субдиректорий.

### Получение справки

Чтобы проверить список доступных параметров, вам просто нужно использовать одну из следующих команд:

```
count-files -h
```

```
count-files --help
```

  
### Скрытые файлы и папки

По умолчанию скрытые файлы и папки игнорируются. Для их обработки используйте необязательный аргумент `-a` или `--all`.

Windows: файлы и папки для которых установлен FILE_ATTRIBUTE_HIDDEN  
Linux, Mac OS: файлы и папки имена которых начинаются с точки ```.```

### Чувствительность к регистру

По умолчанию имена расширений нечувствительны к регистру. Результаты для `ini` и `INI` будут одинаковыми.  
Используйте необязательный аргумент `-c` или `--case-sensitive` для поиска точного совпадения с заданным именем расширения.

### Настройка отображения результатов и обратной связи

Предварительный просмотр.
При поиске по определенному расширению (`-fe` или `--file-extension`) доступен предварительный просмотр текстовых файлов.
Для включения отображения предварительного просмотра укажите аргумент `-p` или `--preview`.
Количество символов для просмотра по умолчанию зависит от настроек ширины терминала и может быть изменено с помощью аргумента `-ps` или `--preview-size`.  
Для получения справки о расширениях файлов, для которых доступно превью, используйте аргумент `-st` или `--supported-types`.

По умолчанию результатом поиска по определенному расширению является список с
 полными путями найденных файлов. Если вам нужна информация о размере файлов, используйте аргумент `-fs` или `--file-sizes`.

Если вам нужно только общее количество всех файлов, количество файлов с определенным расширением или без него 
используйте аргумент `-t` или ` --total`.

Индикатор работы программы.
Программа динамично отображает имена обрабатываемых файлов в терминале если они соответствуют запросу. 
Имена файлов не отображаются: при поиске по определенному расширению, если искомых файлов в папке нет, или если файлы являются скрытыми, а аргумент `--all` не указан.

Обратная связь доступна по умолчанию для подсчета файлов (с таблицей) и для подсчета общего количества файлов.
Необязательный аргумент `-nf` или `--no-feedback` отключает индикатор работы программы. Использование `--no-feedback` позволяет немного ускорить обработку файлов.

Для поиска файлов по расширению (используя `-fe` или `-file-extension`) обратная связь - это сам список.

По умолчанию таблица будет отсортирована по частоте. Если нужна сортировка по алфавиту используйте аргумент `-alpha` или `--sort-alpha`.

### Примеры использования

#### Подсчет общего количества файлов в директории

Короткая форма аргументов  
```
usage: count-files [-a] [-c] [-nr] [-nf] [-t TOTAL] [path]
```
Длинная форма аргументов  
```
usage: count-files [--all] [--case-sensitive] [--no-recursion] [--no-feedback] [--total TOTAL] [path]
```

Для подсчета общего количества файлов с определенным расширением нужно указать название расширения после аргумента.
Используйте символ ```.```(точка) для подсчета общего количества файлов без расширения или две точки без пробелов ```..``` для подсчета абсолютно всех файлов в папке.

Рекурсивный подсчет общего количества файлов с определенным расширением в текущей директории, включая скрытые файлы и папки:

```
count-files -a -t txt
```

```
count-files --all --total txt
```

Рекурсивный подсчет общего количества файлов с определенным расширением в верхнем регистре:

```
count-files -t JPG -c
```

```
count-files --total JPG --case-sensitive
```

Рекурсивный подсчет общего количества файлов без расширения:

```
count-files -t .
```

```
count-files --total .
```

Подсчет общего количества файлов в текущей директории, независимо от расширения и без рекурсии:
```
count-files -nr -t ..
```

```
count-files --no-recursion --total ..
```

#### Подсчет всех файлов и их расширений

Короткая форма аргументов  
```
usage: count-files [-a] [-alpha] [-c] [-nr] [-nf] [path]
```
Длинная форма аргументов  
```
usage: count-files [--all] [--sort-alpha] [--case-sensitive] [--no-recursion] [--no-feedback] [path]
```

Рекурсивный подсчет всех файлов в текущем рабочем каталоге и всех его подкаталогах, исключая скрытые файлы и папки:  
В этом случае расширения файлов в таблице будут отображаться в верхнем регистре (по умолчанию).
```
count-files
```

Рекурсивный подсчет всех файлов в текущем рабочем каталоге и всех его подкаталогах, исключая скрытые файлы и папки, с аргументом `--case-sensitive`:  
В этом случае расширения файлов в таблице будут отображаться как есть (в нижнем и верхнем регистре).

```
count-files -c
```

```
count-files --case-sensitive
```

Рекурсивный подсчет всех файлов в текущем рабочем каталоге и всех его подкаталогах, включая скрытые файлы и папки:

```
count-files -a
```  
```
count-files --all
```

Подсчет всех файлов в текущем рабочем каталоге, исключая скрытые файлы и папки, без рекурсии:

```
count-files -nr
```  

```
count-files --no-recursion
```

Рекурсивный подсчет всех файлов в заданном каталоге, исключая скрытые файлы и папки:

```
count-files ~/Documents
```

Нерекурсивный подсчет всех файлов в заданном каталоге, исключая скрытые файлы и папки, с сортировкой таблицы по алфавиту:

```
count-files -nr -alpha ~/Documents
```

```
count-files --no-recursion --sort-alpha ~/Documents
```

Рекурсивный подсчет всех файлов в заданном каталоге, исключая скрытые файлы и папки, без индикатора работы программы:

```
count-files -nf ~/Documents
```

```
count-files --no-feedback ~/Documents
```

### Поиск файлов с определенным расширением

Короткая форма аргументов  
```
usage: count-files [-a] [-c] [-nr]
                   [-fe FILE_EXTENSION] [-fs]
                   [-p] [-ps PREVIEW_SIZE] [path]
```

Длинная форма аргументов  
```
usage: count-files [--all] [--case-sensitive] [--no-recursion]
                   [--file-extension FILE_EXTENSION] [--file-sizes]
                   [--preview] [--preview-size PREVIEW_SIZE] [path]
```

Рекурсивный поиск всех файлов с расширением `.txt` в заданной директории, включая скрытые файлы:

```
count-files -a -fe txt ~/Documents
```

```
count-files --all --file-extension txt ~/Documents
```

Рекурсивный поиск всех файлов с расширением `.css` в заданной директории, включая информацию о размерах файлов:

```
count-files -fe css -fs ~/Documents
```

```
count-files --file-extension css --file-sizes ~/Documents
```

Рекурсивный поиск всех файлов с расширением `.py` в заданной директории и отображение предварительного просмотра в размере 500 символов для каждого файла:

```
count-files -fe py -p -ps 500 ~/Documents
```

```
count-files --file-extension py --preview --preview-size 500 ~/Documents
```

#### Поиск файлов без расширения

Для поиска файлов без расширения используйте символ ```.``` (точка)  
Примечание: файлы с именами типа `.gitignore`, `Procfile`, `_netrc`.

Рекурсивный поиск всех файлов без расширения в заданной директории:

```
count-files -fe . ~/Documents
```

```
count-files --file-extension . ~/Documents
```

#### Поиск всех файлов

Используйте две точки без пробелов ```..``` для поиска всех файлов с расширением или без него.

Рекурсивный поиск всех файлов с расширением или без него в заданном каталоге:  
(аналогично рекурсивному подсчету любых файлов, но результатом является список с путями)

```
count-files -fe .. ~/Documents
```

```
count-files --file-extension .. ~/Documents
```

#### Дополнительные аргументы

Посмотреть номер версии программы:

```
count-files -v
```

```
count-files --version
```

Список расширений файлов, для которых доступен предварительный просмотр:

```
count-files -st
```

```
count-files --supported-types
```

### Вы нашли ошибку или у Вас есть предложения по улучшению?

Пожалуйста, задайте вопрос или оставьте комментарий в разделе [Issues](https://github.com/victordomingos/Count-files/issues)